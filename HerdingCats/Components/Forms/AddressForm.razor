@using HerdingCats.Data.Model

<RadzenCard>
    <RadzenRow>
        <RadzenColumn>
            <RadzenStack Orientation=Orientation.Vertical>
                <RadzenLabel Component="txt_new_addr_street" Text="Street" />
                <RadzenTextBox Name="txt_new_addr_street" @bind-Value=_street />
            </RadzenStack>
            <RadzenStack Orientation=Orientation.Vertical>
                <RadzenLabel Component="txt_new_addr_city" Text="City" />
                <RadzenTextBox Name="txt_new_addr_city" @bind-Value=_city />
            </RadzenStack>
            <RadzenStack>
                <RadzenLabel Component="num_new_addr_postal" Text="Postal code" />
                <RadzenNumeric TValue=ushort Name="num_new_addr_postal" @bind-Value=_postal />
            </RadzenStack>
            <RadzenButton id="btn_new_addr_add" Text="Add address" aria-label="Add address" Click=OnAddButtonClick  />
        </RadzenColumn>
    </RadzenRow>
</RadzenCard>

@code
{
    [Parameter]
    [EditorRequired]
    public Func<Address, Task>? OnNewAddress { get; set; }

    private string _street = "";
    private string _city = "";
    private ushort _postal;

    private async Task OnAddButtonClick()
    {
        Address address = new()
        {
            Street = _street,
            City = _city,
            PostalCode = _postal
        };
        await OnNewAddress!.Invoke(address);
    }
}